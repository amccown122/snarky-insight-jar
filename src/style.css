:root{
    /* Updated Color System */
    --bg:#fefcf8; --text:#1e293b; --muted:#64748b; --border:#e2e8f0;
    --accent:#ea7a5f; --accent-hover:#d16849; --surface:#ffffff;
    --success:#10b981; --warning:#f59e0b; --error:#ef4444;
    
    /* Enhanced Shadow System */
    --shadow-sm: 0 1px 3px rgba(30, 41, 59, 0.08), 0 1px 2px rgba(30, 41, 59, 0.04);
    --shadow: 0 4px 12px rgba(30, 41, 59, 0.10), 0 2px 4px rgba(30, 41, 59, 0.06);
    --shadow-lg: 0 20px 40px rgba(30, 41, 59, 0.15), 0 8px 16px rgba(30, 41, 59, 0.08);
    
    /* Typography Scale */
    --text-xs: 0.75rem; --text-sm: 0.875rem; --text-base: 1rem;
    --text-lg: 1.125rem; --text-xl: 1.25rem; --text-2xl: 1.5rem;
    
    /* Spacing Scale (8px grid) */
    --space-1: 0.25rem; --space-2: 0.5rem; --space-3: 0.75rem; --space-4: 1rem;
    --space-5: 1.25rem; --space-6: 1.5rem; --space-8: 2rem; --space-10: 2.5rem;
    --space-12: 3rem; --space-16: 4rem;
    
    /* Border Radius */
    --radius-sm: 0.375rem; --radius: 0.5rem; --radius-md: 0.75rem; --radius-lg: 1rem;
    --radius-xl: 1.5rem; --radius-full: 9999px;
    
    --tape-scale:1.05; --tape-x:0%; --tape-y:-1%;
    --card-max: 1080px; --card-ar: 4/3; --jar-scale: 1;
  }
  *, *::before, *::after{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
    font-size:var(--text-base);line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
  
  /* Focus and Accessibility */
  *:focus{outline:none}
  *:focus-visible{outline:2px solid var(--accent);outline-offset:2px;border-radius:var(--radius-sm)}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  
  /* Smooth scrolling */
  html{scroll-behavior:smooth}
  
  /* Better text rendering */
  h1,h2,h3,h4,h5,h6{text-rendering:optimizeLegibility}
  
  /* Reduced motion for accessibility */
  @media (prefers-reduced-motion: reduce){
    *,*::before,*::after{animation-duration:0.01ms !important;animation-iteration-count:1 !important;
      transition-duration:0.01ms !important;scroll-behavior:auto !important}
  }
  header{display:flex;align-items:center;gap:var(--space-3);padding:var(--space-6) var(--space-6) var(--space-2);
    border-bottom:1px solid var(--border);background:rgba(255,255,255,0.8);backdrop-filter:blur(8px);
    position:sticky;top:0;z-index:10}
  .brand{display:flex;flex-direction:column;gap:var(--space-1);font-weight:800;letter-spacing:.02em;color:var(--text);
    transition:opacity 0.2s ease}
  .brand-header{display:flex;align-items:center;gap:var(--space-3)}
  .brand-tagline{margin:0;font-size:var(--text-sm);color:var(--muted);font-weight:500;line-height:1.3}
  .brand .speech-bubble{width:28px;height:28px;object-fit:contain}
  .brand .word{font-size:var(--text-base);line-height:1;opacity:.95;text-transform:uppercase;
    font-weight:900;letter-spacing:0.05em}
  .container{max-width:1400px;margin:var(--space-2) auto var(--space-16);padding:0 var(--space-6)}
  .hero{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-8);align-items:center;
    margin-bottom:var(--space-8)}
  h1{font-size:clamp(2rem,3.8vw,3.5rem);margin:0 0 var(--space-3);line-height:1.05;
    font-weight:900;letter-spacing:-0.025em}
  .sub{color:var(--muted);margin:0 0 var(--space-6);font-size:var(--text-lg);line-height:1.6}
  .cta{display:inline-flex;align-items:center;gap:var(--space-3);border:none;
    padding:var(--space-4) var(--space-8);border-radius:var(--radius-full);
    background:var(--accent);color:#fff;font-weight:900;font-size:var(--text-base);
    box-shadow:var(--shadow), 0 10px 20px rgba(234,122,95,.2);cursor:pointer;
    transition:all 0.2s ease;position:relative;overflow:hidden}
  .cta:hover{background:var(--accent-hover);transform:translateY(-1px);
    box-shadow:var(--shadow-lg), 0 15px 30px rgba(234,122,95,.3)}
  .cta:active{transform:translateY(0);transition:transform 0.1s ease}
  .cta::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;
    background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);
    transition:left 0.5s ease}
  .cta:hover::before{left:100%}
  .toolbar{display:flex;gap:var(--space-3);margin-top:var(--space-4);flex-wrap:wrap}
  .tool{border:1px solid var(--border);background:#fff;border-radius:var(--radius-full);
    padding:var(--space-3) var(--space-5);cursor:pointer;box-shadow:var(--shadow-sm);
    font-weight:600;font-size:var(--text-sm);transition:all 0.2s ease;
    color:var(--text);text-decoration:none}
  .tool:hover{border-color:var(--muted);box-shadow:var(--shadow);transform:translateY(-1px)}
  .tool:active{transform:translateY(0);transition:transform 0.1s ease}
  .tool.warn{background:#fef2f2;border-color:#fecaca;color:#dc2626}
  .tool.warn:hover{background:#fee2e2;border-color:#f87171;color:#b91c1c}
  .card{position:relative;width: 100%;aspect-ratio: var(--card-ar);border-radius: 26px;padding:16px;margin-inline:auto;display:flex;align-items:center;justify-content:center;background:
      radial-gradient(140% 120% at 0% 100%, #f59e0b33 0%, transparent 40%),
      radial-gradient(120% 120% at 100% 0%, #8b5cf633 0%, transparent 50%),
      linear-gradient(135deg,#f6e4b8,#f7b4a8 55%, #bda1f1);border:1px solid var(--border);box-shadow:var(--shadow);}
  .jar{position:relative;width:100%;max-width:600px;margin:auto;aspect-ratio: 1280/800;transform:scale(var(--jar-scale));transform-origin:center;}
  #jarCanvas{position:absolute;inset:0;width:100%;height:100%;z-index:1;}
  .jar-inside,.tape-art,.overlay{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;pointer-events:none}
  .jar-inside{z-index:2} .tape-art{z-index:3;transform:translate(var(--tape-x),var(--tape-y)) scale(var(--tape-scale));transform-origin:center;} .overlay{z-index:4}
  .list{margin-top:var(--space-8);background:var(--surface);border:1px solid var(--border);
    border-radius:var(--radius-xl);box-shadow:var(--shadow);padding:var(--space-2);
    transition:box-shadow 0.2s ease}
  .list:hover{box-shadow:var(--shadow-lg)}
  .item{border-top:1px solid var(--border);padding:var(--space-4) var(--space-4);
    display:grid;grid-template-columns:1fr auto;gap:var(--space-4);align-items:start;
    transition:background-color 0.2s ease;border-radius:var(--radius)}
  .item:first-child{border-top:none}
  .item:hover{background-color:#fafafa}
  .meta{display:flex;flex-wrap:wrap;gap:var(--space-2);color:var(--muted);font-size:var(--text-sm);
    margin-bottom:var(--space-2)}
  .chip{background:rgba(255,255,255,0.8);border:1px solid var(--border);
    padding:var(--space-1) var(--space-3);border-radius:var(--radius-full);
    display:inline-flex;align-items:center;gap:var(--space-2);font-size:var(--text-xs);
    font-weight:500;backdrop-filter:blur(4px)}
  .item-text{color:var(--text);font-size:var(--text-base);line-height:1.5;
    word-break:break-word}
  .actions{display:flex;gap:var(--space-1)}
  .action-btn{border:none;background:transparent;cursor:pointer;padding:var(--space-2);
    border-radius:var(--radius);transition:all 0.2s ease;color:var(--muted);
    display:flex;align-items:center;justify-content:center;width:32px;height:32px}
  .action-btn:hover{background:var(--error);color:#fff;transform:scale(1.05)}
  .action-btn:active{transform:scale(0.95);transition:transform 0.1s ease}
  .modal{position:fixed;inset:0;background:rgba(30,41,59,.5);backdrop-filter:blur(8px);
    display:none;align-items:center;justify-content:center;z-index:50;
    padding:var(--space-4);animation:fadeIn 0.2s ease}
  .modal.show{display:flex}
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  .dialog{width:min(640px,92vw);background:#fff;border:1px solid var(--border);
    border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);padding:var(--space-6);
    position:relative;animation:slideUp 0.3s ease;transform:none}
  @keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
  .dialog h3{margin:var(--space-1) 0 var(--space-4);font-size:var(--text-xl);font-weight:700;color:var(--text)}
  .close{position:absolute;top:var(--space-4);right:var(--space-4);border:none;
    background:transparent;font-size:var(--text-lg);cursor:pointer;color:var(--muted);
    display:flex;align-items:center;justify-content:center;width:32px;height:32px;
    border-radius:var(--radius);transition:all 0.2s ease}
  .close:hover{background:var(--error);color:#fff}
  .coin-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-3);
    margin:var(--space-1) 0 var(--space-3)}
  .coin-opt{border:1px solid var(--border);border-radius:var(--radius-md);
    padding:var(--space-4);cursor:pointer;background:#fff;display:flex;align-items:center;
    gap:var(--space-3);transition:all 0.2s ease;position:relative;overflow:hidden}
  .coin-opt:hover{border-color:var(--accent);background:#fafafa;transform:translateY(-1px);
    box-shadow:var(--shadow-sm)}
  .coin-opt.selected{outline:2px solid var(--accent);outline-offset:2px;
    background:#fff9f5;border-color:var(--accent)}
  .coin-dot{width:16px;height:16px;border-radius:50%;border:1px solid rgba(30,41,59,.2);
    box-shadow:var(--shadow-sm)}
  .dialog textarea{width:100%;border:1px solid var(--border);background:#fff;color:var(--text);
    border-radius:var(--radius-md);padding:var(--space-3) var(--space-4);outline:none;
    font-family:inherit;font-size:var(--text-base);line-height:1.5;resize:vertical;
    min-height:100px;transition:border-color 0.2s ease}
  .dialog textarea:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(234,122,95,.1)}
  .dialog .actions{display:flex;justify-content:flex-end;gap:var(--space-3);
    margin-top:var(--space-4)}
  .btn{border:none;cursor:pointer;padding:var(--space-3) var(--space-6);
    border-radius:var(--radius-full);background:var(--accent);color:#fff;font-weight:700;
    font-size:var(--text-base);box-shadow:var(--shadow);transition:all 0.2s ease}
  .btn:hover:not(:disabled){background:var(--accent-hover);transform:translateY(-1px);
    box-shadow:var(--shadow-lg)}
  .btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}
  .btn:active{transform:translateY(0);transition:transform 0.1s ease}
  /* Enhanced Responsive Design */
  @media (max-width:1100px){
    .hero{grid-template-columns:1fr;gap:var(--space-6)}
    .card{width:100%}
    .container{padding:0 var(--space-4)}
  }
  @media (max-width:640px){
    .hero{gap:var(--space-4)}
    h1{font-size:clamp(1.75rem,4vw,2.5rem)}
    .cta{padding:var(--space-3) var(--space-6);font-size:var(--text-sm)}
    .toolbar{gap:var(--space-2)}
    .tool{padding:var(--space-2) var(--space-4);font-size:var(--text-xs)}
    .dialog{padding:var(--space-4)}
    .coin-grid{grid-template-columns:1fr;gap:var(--space-2)}
    .item{padding:var(--space-3);grid-template-columns:1fr;gap:var(--space-2)}
    .actions{justify-self:end;margin-top:var(--space-2)}
  }
